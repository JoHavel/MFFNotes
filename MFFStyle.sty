\usepackage{inputenc}
\usepackage{polyglossia}
\setmainlanguage{czech}

\usepackage{csquotes}
\usepackage{amsmath, amsthm, amssymb}
\usepackage{wasysym}
\usepackage{newunicodechar}
\usepackage{fontspec}

\usepackage{graphicx, tabularx}
\usepackage[dvipsnames]{xcolor}
\graphicspath{{images/}}									% Přidání složky images do složek, kde se hledají obrázky

\usepackage[hidelinks]{hyperref}							% Počítačová verze umí odkazy
\usepackage{lipsum}											% Lorem ipsum text


\usepackage{listings}										% Balíček pro zvýraznění a formátování kódu
\usepackage{lstautogobble}									% Doplňující balíček k listings

\usepackage{siunitx}										% SI jednotky

\lstdefinestyle{mystyle}{
	backgroundcolor=\color{codegray},
	numbers=left, 
	tabsize=2
}
\lstset{style=mystyle}


%\usepackage[automake,toc]{glossaries}						% Balíček pro zkratky
%\makeglossaries												% Aktivování zkratek
%\loadglsentries{Zkratky}									% Načtení zkratek

%\usepackage[sorting=none, backend=bibtex, maxcitenames=2]{biblatex}
															% Balíček pro citace
%\addbibresource{Bibliografie.bib}							% Import zdrojů


\renewcommand{\sfdefault}{lmr}

\setlength{\parskip}{1em}
%\renewcommand{\baselinestretch}{1.5}						% Řádkování 1.5
\usepackage[a4paper,%										% Formát A4
            left=20mm,%										% Levý okraj 35 mm
            right=20mm,%									% Pravý okraj 10 mm
            top=25mm,%										% Horní okraj 25 mm
            bottom=15mm,%									% Dolní okraj 15 mm
            includefoot,%									% Posunutí zápatí nad okraj, děkuji https://tex.stackexchange.com/a/49856
            heightrounded%									% Vylepšení sázení stránky, děkuji https://tex.stackexchange.com/a/49856
            ]{geometry}				

%\newcommand\toSet[1]{\expandafter\gdef\csname\string#1\endcsname{\ensuremath{\mathbb{#1}}}}
%\def\eToSet #1{\if ;#1\else\toSet{#1}\expandafter\eToSet\fi}
%\eToSet X Y C N R Z Q M U V A B W F ;

%\newcommand\toMath[1]{\expandafter\gdef\csname\string#1\endcsname{$#1$}}
%\def\eToMath #1{\if ;#1\else\toMath{#1}\expandafter\eToSet\fi}
%\eToMath x y n m k l i \varepsilon ;

%\renewcommand{\P}{\ensuremath{\mathcal{P}}}
\renewcommand{\O}{\emptyset}

\catcode`\©=\active
\catcode`\®=\active
\catcode`\¦=\active

\def®#1{\ensuremath{\mathbb{#1}}}
\def©#1{\ensuremath{\mathcal{#1}}}
\def¦#1{\ensuremath{\mathbf{#1}}}



\newcommand{\QED}{\square}

\newcommand{\nin}{\ensuremath{n \in \N}}

\newunicodechar{≠}{\neq}
\newunicodechar{≥}{\geq}
\newunicodechar{≤}{\leq}
\newunicodechar{…}{\ldots}
\newunicodechar{·}{\cdot}
\newunicodechar{µ}{\mu}
\newunicodechar{≐}{\doteq}
\newunicodechar{»}{\Rightarrow}
\newunicodechar{«}{\Leftarrow}
\newunicodechar{›}{\rightarrow}
\newunicodechar{‹}{\leftarrow}
\newunicodechar{≈}{\approx}
\newunicodechar{π}{\pi}
\newunicodechar{≡}{\equiv}
\newunicodechar{∑}{\sum}
%\newunicodechar{∞}{\infty} ???


%\newunicodechar{√}{\sqrt{}}
%\newunicodechar{∛}{\sqrt[3]{}}

\catcode`\√=\active
\catcode`\∛=\active

\def√{\sqrt}
\def∛{\sqrt[3]}

\let\epsilon\varepsilon
\let\rho\varrho
\let\phi\varphi
\let\theta\vartheta
\let\kappa\varkappa

\def\degree{^{\circ}}

\DeclareMathOperator{\cl}{cl}
\DeclareMathOperator{\Int}{int}
\DeclareMathOperator{\Ext}{ext}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\weight}{w}
\DeclareMathOperator{\den}{d}
\DeclareMathOperator{\vol}{vol}
\DeclareMathOperator{\LO}{LO}
\DeclareMathOperator{\RREF}{RREF}
\DeclareMathOperator{\Jac}{Jac}
\DeclareMathOperator{\Ker}{Ker}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\B}{B}
\let\P\undefined
\DeclareMathOperator{\P}{P}
\DeclareMathOperator{\argmax}{arg\,max}
\DeclareMathOperator{\argmin}{arg\,min}
\DeclareMathOperator{\cotg}{cotg}
\DeclareMathOperator{\tg}{tg}
\DeclareMathOperator{\arccotg}{arccotg}
\DeclareMathOperator{\arctg}{arctg}
\DeclareMathOperator{\im}{Im}
\DeclareMathOperator{\diam}{diam}
\DeclareMathOperator{\osc}{osc}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\abs}{abs}
\DeclareMathOperator{\st}{st}
\DeclareMathOperator{\NSD}{NSD}
\DeclareMathOperator{\NSN}{NSN}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\rot}{rot}
\DeclareMathOperator{\grad}{grad}
\DeclareMathOperator{\Div}{div}
\DeclareMathOperator{\dist}{dist}
\DeclareMathOperator{\Rang}{Rng}% překouk způsoboval, že jsem pak psal Rang místo Rng
\DeclareMathOperator{\Rng}{Rng}
\DeclareMathOperator{\Dom}{Dom}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\Fin}{Fin}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\Ind}{Ind}
\DeclareMathOperator{\ind}{ind}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\conv}{conv}
\DeclareMathOperator{\spn}{span}
\DeclareMathOperator{\codim}{codim}
\DeclareMathOperator{\esssup}{esssup}
\DeclareMathOperator{\rad}{rad}
\DeclareMathOperator{\card}{card}
\DeclareMathOperator{\bigtimes}{X}
\DeclareMathOperator{\graf}{graf}
\DeclareMathOperator{\trace}{trace}
\DeclareMathOperator{\minmag}{max\,mag}
\DeclareMathOperator{\maxmag}{min\,mag}
\DeclareMathOperator{\var}{var}

\renewcommand{\(}{\left(}
\renewcommand{\)}{\right)}
\renewcommand{\{}{\left\lbrace}
\renewcommand{\}}{\right\rbrace}
\renewcommand{\[}{\left[}
\renewcommand{\]}{\right]}
\newcommand{\<}{\left\langle}
\renewcommand{\>}{\right\rangle}

\newcommand{\lp}{\left(}
\newcommand{\rp}{\right)}
\newcommand{\lx}{\left[}
\newcommand{\px}{\right]}

\usepackage{sectsty} % Balíček pro změnu velikosti nadpisů
\sectionfont{\raggedright\LARGE} 
\subsectionfont{\raggedright\Large}


\usepackage[framemethod=TikZ, xcolor]{mdframed}
\usepackage{etoolbox}

\newlength{\topskipp}
\setlength{\topskipp}{\topskip}

%https://tex.stackexchange.com/questions/37797/theorem-environment-line-break-after-label
\newtheoremstyle{break}% name
  {}%         Space above, empty = `usual value'
  {}%         Space below
  {\itshape}% Body font
  {}%         Indent amount (empty = no indent, \parindent = para indent)
  {\bfseries\large}%Thm head font
  {\vspace{-0.7em}\newline\rule{\textwidth}{0.4pt}}%Punctuation after thm head
  {\newline}% Space after thm head: \newline = linebreak
  {}%         Thm head spec


%https://tex.stackexchange.com/questions/37797/theorem-environment-line-break-after-label
\newtheoremstyle{definitionbreak}% name
  {}%         Space above, empty = `usual value'
  {}%         Space below
  {}%         Body font
  {}%         Indent amount (empty = no indent, \parindent = para indent)
  {\bfseries\large}%Thm head font
  {\vspace{-0.7em}\newline\rule{\textwidth}{0.4pt}}%Punctuation after thm head
  {\newline}% Space after thm head: \newline = linebreak
  {}%         Thm head spec

%https://tex.stackexchange.com/questions/37797/theorem-environment-line-break-after-label
\newtheoremstyle{remarkbreak}% name
  {}%         Space above, empty = `usual value'
  {}%         Space below
  {}%         Body font
  {}%         Indent amount (empty = no indent, \parindent = para indent)
  {\itshape}% Thm head font
  {}%         Punctuation after thm head
  {\newline}% Space after thm head: \newline = linebreak
  {}%         Thm head spec

%https://tex.stackexchange.com/questions/88467/how-does-one-framebox-a-proof?noredirect=1&lq=1
\mdfdefinestyle{proofstyle}{%
	%linecolor=red,
	middlelinewidth=1pt,%
	frametitlerule=true,%
	%apptotikzsetting={\tikzset{mdfframetitlebackground/.append style={%
	%shade,left color=white, right color=blue!20}}},
	%frametitlerulecolor=green!60,
	frametitlerulewidth=.2pt,
	innertopmargin=\topskipp,
	}

%https://tex.stackexchange.com/questions/88467/how-does-one-framebox-a-proof?noredirect=1&lq=1
\mdfdefinestyle{warningstyle}{%
    linecolor=red,
    middlelinewidth=1pt,%
    frametitlerule=true,%
    apptotikzsetting={\tikzset{mdfframetitlebackground/.append style={%
                        shade,left color=white, right color=blue!20}}},
    frametitlerulecolor=green!60,
    frametitlerulewidth=.2pt,
    innertopmargin=\topskipp,
}

%https://latex.org/forum/viewtopic.php?t=22592
\mdfdefinestyle{proof}{
	   skipabove         = .5\baselineskip ,
	   skipbelow         = .5\baselineskip ,
	   leftmargin        = 0pt ,
	   rightmargin       = 0pt ,
	   innermargin       = 0pt ,
	   innertopmargin    = 1em ,
       innerleftmargin   = .5em ,
	   innerrightmargin  = 0pt ,
	   innerbottommargin = .5em ,
	   hidealllines      = true ,
	   singleextra       = {
		   \draw (O) -- ++(0,.675em) (O) -- ++(.675em,0) ;
		   \draw (P-|O) -- ++(0,-.675em) (P-|O) -- ++(.675em,0) ;
		   },
	   firstextra        = {
		   \draw (P-|O) -- ++(0,-.675em) (P-|O) -- ++(.675em,0) ;									         },
	   secondextra       = {
		   \draw (O) -- ++(0,.675em) (O) -- ++(.675em,0) ;
           },
}

\theoremstyle{break}
\newtheorem{veta}{Věta}[section]
\newtheorem*{veta*}{Věta}
\newtheorem{vetain}[veta]{Věta}
\newtheorem*{vetain*}{Věta}
\newtheorem{lemma}[veta]{Lemma}
\newtheorem*{lemma*}{Lemma}
\newtheorem{lemmain}[veta]{Lemma}
\newtheorem*{lemmain*}{Lemma}
\newtheorem{tvrzeni}[veta]{Tvrzení}
\newtheorem*{tvrzeni*}{Tvrzení}
\newtheorem{tvrzeniin}[veta]{Tvrzení}
\newtheorem*{tvrzeniin*}{Tvrzení}
\let\oldproofname=\proofname
\renewcommand{\proofname}{\oldproofname[Důkaz]}
\renewcommand\qedsymbol{$\QED$}
\theoremstyle{definitionbreak}
\newtheorem{definice}{Definice}[section]
\newtheorem{definicein}[definice]{Definice}
\theoremstyle{remarkbreak}
\newtheorem*{poznamka}{Poznámka}
\newtheorem*{poznamkain}{Poznámka}
\newtheorem*{dusledek}{Důsledek}
\newtheorem*{dusledekin}{Důsledek}
\newtheorem*{pozorovani}{Pozorování}
\newtheorem*{pozorovaniin}{Pozorování}
\newtheorem*{dukaz}{Důkaz}
\newtheorem*{dukazin}{Důkaz}
\newtheorem*{priklady}{Například}
\newtheorem*{prikladyin}{Například}
\newtheorem*{priklad}{Příklad}
\newtheorem*{prikladin}{Příklad}
\newtheorem*{umluva}{Úmluva}
\newtheorem*{umluvain}{Úmluva}
\newtheorem*{reseni}{Řešení}
\newtheorem*{upozorneni}{Pozor}


\surroundwithmdframed{veta}
\surroundwithmdframed{veta*}
\surroundwithmdframed{vetain}
\surroundwithmdframed{vetain*}
\surroundwithmdframed{lemma}
\surroundwithmdframed{lemma*}
\surroundwithmdframed{lemmain}
\surroundwithmdframed{lemmain*}
\surroundwithmdframed{definice}
\surroundwithmdframed{definice*}
\surroundwithmdframed{definicein}
\surroundwithmdframed{definicein*}
\surroundwithmdframed{tvrzeni}
\surroundwithmdframed{tvrzeni*}
\surroundwithmdframed{tvrzeniin}
\surroundwithmdframed{tvrzeniin*}

\surroundwithmdframed[style=proofstyle]{poznamka}
\surroundwithmdframed[style=proofstyle]{dusledek}
\surroundwithmdframed[style=proofstyle]{pozorovani}
\surroundwithmdframed[style=proofstyle]{dukaz}
\surroundwithmdframed[style=proofstyle]{priklady}
\surroundwithmdframed[style=proofstyle]{priklad}
\surroundwithmdframed[style=proofstyle]{umluva}
\surroundwithmdframed[style=proof]{poznamkain}
\surroundwithmdframed[style=proof]{dusledekin}
\surroundwithmdframed[style=proof]{pozorovaniin}
\surroundwithmdframed[style=proof]{dukazin}
\surroundwithmdframed[style=proof]{prikladyin}
\surroundwithmdframed[style=proof]{prikladin}
\surroundwithmdframed[style=proof]{umluvain}
\surroundwithmdframed[style=proof]{reseni}

\surroundwithmdframed[style=warningstyle]{upozorneni}

\AtEndEnvironment{dukaz}{\qed}
\AtEndEnvironment{dukazin}{\qed}
