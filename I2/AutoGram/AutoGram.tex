\documentclass[12pt]{article}                   % Začátek dokumentu
\usepackage{../../MFFStyle}                     % Import stylu

\begin{document}
\section{Úvod}
    \begin{poznamka}[Historie]
        \ 
        \begin{itemize}
            \item První formalizace pojmu algoritmus -- Ada, Countess of Lovelace 1852.
            \item Intenzivnější vývoj s rozvojem počítačů ve 2. čtvrtině 20. století.
            \item Co stroje umí a co ne? -- Church, Turing, Kleene (konečné automaty / neuronové sítě), Post, Markov, Chomsky (zásobníkové automaty a formální teorie konečných automatů, zkoumal Angličtinu).
        \end{itemize}
    \end{poznamka}

    \begin{poznamka}[Cíl]
        Osvojit si abstraktní model počítače, vnímat jak drobné změny v definici vedou k velmi rozdílným důsledkům. Zažít skutečnost alg. nerozhodnutelných problémů a připravit se na přednášku o složitosti a NP-úplnosti.
    \end{poznamka}

    \begin{poznamka}[Praktické využití]
        Korektnost algoritmů, zpracování přirozeného jazyka, lexikální a syntaktická analýza v překladačích. Návrh, popis a verifikace hardwaru (automaty, integrované obvody, stroje). Vyhledávání v textu atd.
    \end{poznamka}

\section{}
    \begin{definice}[Deterministický konečný automat (DFA)]
        Deterministický konečný automat $A = (Q, \Sigma, \delta, q_0, F)$ sestává z: konečné množiny stavů ($Q$), konečné neprázdné množiny vstupních symbolů (abecedy, $\Sigma$), přechodové funkce, tj. zobrazení $Q \times \Sigma \rightarrow Q$ (značí se hranami grafu, $\delta$), počátečního stavu (vede do něj šipka 'odnikud', $q_0 \in Q$) a neprázdné množiny (přijímajících) stavů (značí se dvojitým kruhem / šipku 'ven', $F \subseteq Q$).
    
        \begin{umluvain}
            Přidáváme 0-2 stavy: fail (pokud je nějaký přechod nedefinován, vede sem a všechno z fail vede do fail) a final (pokud je $F$ prázdné, všechny šipky z něj vedou zpět do něj).
        \end{umluvain}
    \end{definice}

    \begin{definice}[Slovo, jazyk]
        Mějme neprázdnou množinu symbolů $\Sigma$. Slovo je konečná (i prázdná) posloupnost symbolů $s \in \Sigma$, prázdné slovo se značí $\lambda$ nebo $\epsilon$.

        Množinu všech slov v abecedě $\Sigma$ značíme $\Sigma^*$ a množinu všech neprázdných $\Sigma^+$.

        Jazyk $L \subseteq \Sigma^*$ je množina slov v abecedě $\Sigma$.
    \end{definice}

    \begin{definice}[Operace: zřetězení, mocnina, délka slova]
        Nad slovy $\Sigma^*$ definujeme operace: Zřetězení slov $u.v$ nebo $uv$, mocnina (počet opakování) $u^n$ ($u^0 = \lambda$, $u^1 = u$, $u^{n+1} = u^n.u$), délka slova $|u|$ ($|\lambda| = 0$, $|auto| = 4$), počet výskytů $s \in \Sigma$ ve slově $u$ značíme $|u|_s$ ($|zmrzlina|_z = 2$).
    \end{definice}

    \begin{definice}[Rozšířená přechodová funkce]
        Mějme přechodovou funkci $\delta: Q \times \Sigma \rightarrow Q$. Rozšířenou přechodovou funkci $\delta^*: Q \times \Sigma^* \rightarrow Q$ (tranzitivní uzávěr $\delta$) definujeme induktivně: $\delta^*(q, \lambda) = q$ a $\delta^*(q, wx) = \delta(\delta^*(q, w), x)$ pro $x \in \Sigma$ a $w \in \Sigma^*$.
    \end{definice}

    \begin{definice}[Jazyky rozpoznatelné konečnými automaty, regulární jazyky]
        Jazykem rozpoznávaným (akceptovaným, přijímaným) konečným automatem $A$ nazveme jazyk $L(A) = \{w | w \in \Sigma^* \land \delta^*(q_0, w) \in F\}$.

        Jazyk je rozpoznatelný konečným automatem, jestliže existuje konečný automat $A$ takový, že $L = L(A)$.

        Třídu jazyků rozpoznatelných konečnými automaty označíme $©F$ a nazveme ji regulární jazyky.
    \end{definice}

    \begin{veta}[!Iterační (pumpin) lemma pro regulární jazyky]
        Mějme regulární jazyk $L$. Pak existuje konstanta $n \in ®N$ (závislá na $L$) tak, že každé $w \in L; |w| ≥ n$ můžeme rozdělit na tři části, $w = xyz$, že $y ≠ \lambda \land |xy| ≤ n \land \forall k \in ®N_0$, slovo $xy^kz$ je také v $L$.

        \begin{dukazin}
            Mějme regulární jazyk $L$, pak existuje DFA $A$ s $n$ stavy, že $L = L(A)$. Vezmeme libovolné slovo $a_1a_2…a_n…a_m = w \in L$ délky $m ≥ n$, $a_i \in \Sigma$. Následně definujeme $\forall i: p_i = \delta^*(q_0, a_1a_2…a_i)$. Platí $p_0 = q_0$. Z Dirichletova principu se některý stav opakuje. Vezmeme první takový, tj. $(\exists i, j)(0 ≤ i < j ≤ n \land p_i = p_j)$.

            Definujeme $x = a_1a_2…a_i$, $y = a_{i+1}a_{i+2}…a_j$ a $z = a_{j+1}a_{j+2}…a_m$, tj. $w = xyz$, $y ≠ \lambda$, $|xy| ≤ n$.
        \end{dukazin}
    \end{veta}

% 9. 3. 2021

    \begin{definice}[Kongruence, konečný index]
        Mějme konečnou abecedu $\Sigma$ a relaci ekvivalence $\sim$ na $\Sigma^*$. Potom $\sim$ je pravá kongruence, jestliže $\forall u, v, w \in \Sigma^*: u \sim v \implies uw \sim vw$. $\sim$ je konečného indexu, jestliže rozklad $\Sigma^* / \sim$ má konečný počet tříd.

        Třídu kongruence $\sim$ obsahující slovo $u$ značíme $[u]_\sim$, resp. $[u]$.
    \end{definice}

    \begin{veta}[Myhill-Nerodova věta]
        Nechť $L$ je jazyk nad konečnou abecedou $\Sigma$. Potom $L$ je rozpoznatelný konečným automatem právě tehdy, když existuje pravá kongruence $\sim$ konečného indexu nad $\Sigma^*$ tak, že $L$ je sjednocením jistých tříd rozkladu $\Sigma^* / \sim$.

        \begin{dukazin}
            $\implies$ definujeme $u \sim v ≡ \delta^*(q_0, u) = \delta^*(q_0, v)$. Zřejmě je to ekvivalence. Je to pravá kongruence (z definice $\delta^*$) a má konečný index (jelikož automat má konečně mnoho stavů).
            $$ L = \{w|\delta^*(q_0, w) \in F\} = \bigcup_{q \in F} [w | \delta^*(q_0, w) = q]_\sim. $$ 

            $\Rightarrow$ abeceda automatu bude $\Sigma$. Stavy budou třídy rozkladu $\Sigma^* / \sim$. Počáteční stav je $q_0 = [\lambda]_\sim$. Koncové stavy $F = \{c_1, …, c_n\}$, kde $L = \bigcup_{i \in [n]} c_i$. Přechodová funkce $\delta([u], x) = [ux]$ (korektní z definice pravé kongruence).
        \end{dukazin}
    \end{veta}

    \begin{priklad}
        $L = \{u | u = a^+b^ic^i \land u = b^ic^j \land i, j \in ®N_0\}$ není regulární, ale vždy lze pumpovat první písmeno.

        \begin{dukazin}[Sporem]
            Předpokládejme, že $L$ je regulární. Pak existuje pravá kongruence $\sim$ konečného indexu $m$, $L$ je sjednocení některých tříd $\Sigma^* / \sim$. Vezmeme množinu slov $S = \{ab, abb, abbb, …, ab^{m+1}\}$. Existují dvě slova (Dirichletův princip) $i ≠ j$, která padnou do stejné třídy. $ab^i \sim ab^j \Leftrightarrow ab^ic^i \sim ab^jc^i$, ale $ab^ic^i \in L \land ab^jc^i \notin L$. \lightning.
        \end{dukazin}
    \end{priklad}

    \begin{definice}[Dosažitelné stavy]
        Mějme DFA $A = (Q, \Sigma, \delta, q_0, F)$ a $q \in Q$. Řekneme, že stav $q$ je dosažitelný, jestliže existuje $w \in \Sigma^*$ takové, že $\delta^*(q_0, w) = q$.

        \begin{poznamka}[Hledání dosažitelných stavů]
            'Hloupé' prohledávání do šířky.
        \end{poznamka}
    \end{definice}

    \begin{definice}[Automatový homomorfismus]
        Nechť $A_1, A_2$ jsou DFA se standardním označením a shodnou abecedou. Řekněme, že zobrazení $h: Q_1 \rightarrow Q_2$ je automatovým homomorfismem, jestliže $h({q_1}_0) = {q_2}_0$, $h(\delta_1(q, x)) = \delta_2(h(q), x)$ a $q \in F_1 \Leftrightarrow h(q) \in F_2$.
    \end{definice}

    \begin{definice}[Ekvivalence automatů]
        Dva konečné automaty nad stejnou abecedou jsou ekvivalentní, jestliže rozpoznávají stejný jazyk.
    \end{definice}

    \begin{veta}[O ekvivalenci automatů]
        Existuje-li homomorfismus konečných automatů, pak jsou tyto automaty ekvivalentní.

        \begin{dukazin}
            Triviální.
        \end{dukazin}
    \end{veta}

    \begin{definice}[Ekvivalence stavů]
        Dva stavy jsou ekvivalentní, pokud pro všechna slova dojdeme z obou stavů buď do nepřijímajících, nebo do přijímajících stavů. Pokud dva stavy nejsou ekvivalentní, říkáme, že jsou rozlišitelné.
    \end{definice}

    \begin{poznamka}[Algoritmus pro nalezení eqvivalentních stavů]
        Vytvořím tabulku dvojic stavů a zaškrtám zřejmě rozlišitelné dvojice (přijímající + nepřijímající). Potom pro každou dvojici zkusím všechna písmena a pokud nějaké z nich posune ze stavů do rozlišitelné, pak i tato dvojice je rozlišitelná. Opakuji, dokud se něco mění.
    \end{poznamka}

    \begin{definice}[Redukovaný DFA, redukt]
        DFA je redukovaný, pokud nemá nedosažitelné stavy a žádné dva stavy nejsou ekvivalentní. DFA $B$ je reduktem $A$, jestliže $B$ je redukovaný a $B$ a $A$ jsou ekvivalentní.
    \end{definice}

% 16. 3. 2021

    \begin{poznamka}[Algoritmus na testování ekvivalence reg. jazyků]
        Najdeme jeden a druhý DFA rozpoznávající jeden a druhý jazyk. BÚNO jsou stavy disjunktní. Vytvoříme DFA sjednocením (za počáteční stav vezmeme libovolný z 2 počátečních stavů našich DFA). Potom jsou jazyky ekvivalentní, když jsou ekvivalentní počáteční stavy našich DFA.
    \end{poznamka}
    
\section{NFA}

    \begin{definice}[Nederministický konečný automat (NFA)]
        NFA je DFA, kde přechodová funkce je funkce do potenční množiny stavů. A počáteční stav může být také množina, ale existují obě alternativy.
    \end{definice}

    \begin{definice}[Rozšířená přechodová funkce]
        Pro přechodovou funkci $\delta$ NFA je rozšířená přechodová funkce $\delta^*: Q\times \Sigma^* \rightarrow ©P(Q)$ definovaná indukcí: $\delta^*(q, \lambda) = \{q\}$ a $\delta^*(q, wx) = \bigcup_{p \in \delta^*(q, w)}\delta(p, x)$.
    \end{definice}

    \begin{definice}[Jazyk přijímaný NFA]
        Mějme NFA $A = (Q, \Sigma, \delta, S_0, F)$, pak $L(A) = \{w|\exists q_0 \in S_0:\delta^*(q_0, w)\cap F ≠ \O\}$ je jazyk přijímaný automatem $A$.
    \end{definice}

    \begin{poznamka}[Algoritmus: podmnožinová konstrukce]
        Začínáme s NFA $N = (Q_N, \Sigma, \delta_N, S_0, F_N)$. Cílem je popis deterministického DFA $D = (Q_D, \Sigma, \delta_D, S_0, F_D)$, pro který $L(N) = L(D)$.

        $Q_D$ je množina podmnožin $Q_N$ ($Q_D = ©P(Q_n)$). Počáteční stav DFA označený $S_0$ je prvek $Q_D$. $F_D = \{S|S \in ©P(Q_n) \land S \cap F_N ≠ \O\}$. Přechodová funkce je ($S \in Q_D$, $a \in \Sigma$):
        $$ \delta_D(S, a) = \bigcup_{p \in S} \delta_N(p, a). $$

        \begin{dukazin}
            Triviální, indukcí dokážeme shodné chování $d*$.
        \end{dukazin}
    \end{poznamka}

    \begin{definice}[$\lambda$-NFA]
        $\lambda$-NFA (NFA s $\lambda$ přechody) je NFA, kde $\delta$ je definována pro $Q \times (\Sigma \cup \{\lambda\})$.
    \end{definice}

    \begin{definice}[$\lambda$-uzávěr]
        Pro $q \in Q$ definujeme $\lambda$-uzávěr stavu $q$ (v těchto poznámkách značeno $\overline{q}$) rekurzivně: $q \in \overline{q}$. Je-li $p \in \overline{q}$ a $r \in \delta(p, \lambda)$, pak i $r \in \overline{q}$.

        Pro $S \subseteq Q$ definujeme $\overline{S} = \bigcup_{q \in S} \overline{q}$.
    \end{definice}

    \begin{definice}[Rozšířená přechodová funkce]
        $\delta^*(q, \lambda) = \overline{q}$. $\delta^*(q, wa) = \overline{\bigcup_{\delta^*(q, w)} \delta(p, a)}$.
    \end{definice}

    \begin{veta}
        Jazyk je rozpoznatelný $\lambda$-NFA $\Leftrightarrow$ $L$ regulární.

        \begin{dukazin}
            $\Leftarrow$: triviální. $\implies$: přes podmnožinovou konstrukci.
        \end{dukazin}
    \end{veta}

\section{Množinové operace nad jazyky}
    \begin{definice}[Množinové operace nad jazyky]
        Mějme jazyky $L, M$. Definujeme následující operace:

        \begin{itemize}
            \item binární (konečné) sjednocení $L \cup M = \{w|w \in L \lor w \in M\}$,
            \item průnik $L \cap M = \{w|w \in L \land w \in M\}$,
            \item rozdíl $L - M = \{w | w \in L \land w \notin M\}$,
            \item doplněk (komplement) $\overline{L} = -L = \{w|w\notin L\} = \Sigma^* - L$.
        \end{itemize}
    \end{definice}

    \begin{veta}[Uzavřenost na množinové operace]
        Regulární jazyky jsou uzavřené na 4 operace výše.

        \begin{dukazin}
            Doplněk: doplníme všechny přechody (doplníme FAIL stav). Potom prohodíme přijímající a nepřijímající stavy.

            Průnik sjednoceni a rozdíl přes tzv. součinový automat $(Q_1 \times Q_2, \Sigma, \delta', (q_0, q_1), F)$, kde $\delta'((p_1, p_2), x) = (\delta_1(p_1, x), \delta_2(p_2, x))$ a $F$ je podle toho, zda řešíme průnik, sjednocení nebo rozdíl, $F_1 \times F_2$, $(F_1\times Q_2)\cup(Q_1 \times F_2)$ nebo (po doplnění) $F_1 \times (Q_2 - F_2)$.
        \end{dukazin}
    \end{veta}

    \begin{definice}[Řetězcové operace nad jazyky]
        Mějme jazyky $L, M$. Definujeme následující operace:

        \begin{itemize}
            \item zřetězení $L.M = \{uv|u \in L \land v \in M\}$,
            \item mocninu $L^0 = \{\lambda\}, L^{i+1} = L^i.L$,
            \item pozitivní iteraci $L^+ = \bigcup_{i ≥ 1}L^i$,
            \item obecnou iteraci $L^* = \bigcup_i L^i$,
            \item otočení (zrcadlový obraz, reverze) $L^R = \{u^R|u \in L\}$, $(x_1x_2…x_n)^R = x_n…x_2x_1$,
            \item levý kvocient $M\setminus L = \{v|uv \in L \land u \in M\}$,
            \item levá derivace $\partial_w L = \{w\}\setminus L$,
            \item pravý kvocient $L/M = \{u|uv \in L \land v \in M\}$,
            \item pravá derivace $\partial^R_w L = L/\{w\}$.
        \end{itemize}
    \end{definice}

    \begin{veta}[Uzavřenost regulárních jazyků na řetězcové operace]
        Regulární jazyky jsou uzavřené na 10 operací výše.
    \end{veta}

% 23. 3. 2021

    \begin{definice}[Regulární jazyky]
        Algebraický popis jazyků. Definuje pouze regulární jazyky, ale všechny.

        Základ $\lambda$ = prázdný řetězec (${\lambda}$), $\O$ = prázdný výraz ($\{\}$), písmeno abecedy ($\{a\}, a \in \Sigma$).

        Zbytek vyrobíme indukcí pomocí: $\alpha + \beta$ ($L(\alpha) \cup L(\beta)$), $\alpha\beta$ ($L(\alpha)L(\beta)$), $\alpha^*$ ($L(\alpha)^*$), $(\alpha)$ ($L(\alpha)$) ($= \alpha$).
    \end{definice}

    \begin{definice}[Priorita]
        Největší prioritu má $*$, potom zřetězení a nakonec sjednocení.
    \end{definice}

    \begin{veta}[varianta Kleene]
        Každý jazyk reprezentovaný konečným automatem lze zapsat jako regulární výraz. A opačně.

        \begin{dukazin}
            $\Leftarrow$: triviální indukcí dle struktury regulárního výrazu.

            $\implies$: Zkonstruujeme induktivně (podle $k$) $R_{ij}^k$, kde $k$ značí maximální číslo mezistavu na cestě, $i$ je počáteční stav, $j$ je koncový stav. $R_{ij}^k$ tedy určuje regulární výraz všech slov, kterými se dostanu přes mezistavy $≤k$ z $i$ do $j$. Pro $k=0$ je konstrukce zřejmá (součet všech písmen vedoucích z $i$ do $j$, resp. $\O$).

            $$ R^{k+1}_{ij} = R^k_{ij} + R^k_{i(k+1)}\(R^k_{(k+1)(k+1)}\)^*R^k_{(k+1)j}. $$

            Nakonec vezmu regulární výraz, který je součtem všech $R$ z počátečního stavu do nějakého koncového s $k=n$ ($n = $ počet stavů).
        \end{dukazin}
    \end{veta}

    \begin{definice}[Substituce jazyků]
        Mějme konečnou abecedu $\Sigma$. Pro každé $x \in \Sigma$ budiž $\sigma(x)$ jazyk v nějaké abecedě $Y_x$. Dále položme $\sigma(\lambda) = \{\lambda\}$ a $\sigma(u.v) = \sigma(u).\sigma(v)$.

        Zobrazení $\sigma: \Sigma^* \rightarrow P(Y^*)$, kde $Y = \sum_{x \in \Sigma}Y_x$ se nazývá substituce. Nevypouštějící substituce je substituce, kde žádné $\sigma(x)$ neobsahuje $\lambda$.
    \end{definice}

    \begin{definice}[Homomorfizmus]
        Homomorfizmus $h$ je speciální případ substituce, kde obraz je vždy jen jednoslovný jazyk (vynecháváme u něj závorky), tj. $\forall x \in \Sigma: h(x) = w_x$. Pokud $\forall x: w_x ≠ \lambda$, jde o nevypouštějící homomorfizmus.

        Inverzní homomorfizmus $h^{-1}(L) = \{w|h(w) \in L\}$.
    \end{definice}

    \begin{veta}[Uzavřenost na homomorfizmus]
        Je-li jazyk $L$ i $\forall x \in \Sigma$ jazyk $\sigma(x).h(x)$ regulární, pak je regulární i $\sigma(L)$ a $h(L)$.

        \begin{dukazin}
            Prezentace. (Indukcí rozebereme sjednocení, zřetězení a iteraci na základní symboly a ty proženeme $\sigma$). Nezkouší se.
        \end{dukazin}
    \end{veta}

    \begin{veta}
        Je-li $h$ homomorfizmus abecedy $T$ do abecedy $\Sigma$ a $L$ je regulární jazyk $\Sigma$, pak $h^{-1}(L)$ je také regulární jazyk.

        \begin{dukazin}
            Pro $L$ máme DFA $A = (Q, \Sigma, \delta, q_0, F)$. Definujeme $\lambda$-NFA $B = Q', T, \delta', [q_0, \lambda], F\times\{\lambda\}$, kde $Q' = \{[q, u]\}, q \in Q, u \in \Sigma^*, \exists (a \in T)\ \exists (v \in \Sigma^*: h(a) = vu)$. $\delta'([q, \lambda], a) = [q, h(a)]$ a $\delta'([q, bv], \lambda) = [p, v]$, kde $\delta(q, b) = p$ a $b \in \Sigma$.
        \end{dukazin}
    \end{veta}

% 30. 3. 2021

\section{Dvousměrné (dvoucestné) konečné automaty}
    \begin{definice}[Dvousměrné (dvoucestné) konečné automaty (2DFA)]
        Dvousměrným (dvoucestným) konečným automatem nazýváme pětici $A = (Q, \Sigma, \delta, q_0, F)$, kde $Q, \Sigma, q_0, F$ jsou jako obvykle a $\delta$ je zobrazení $Q \times \Sigma \rightarrow Q \times \{-1, 1\}$ určuje přechodovou funkci rozšířenou o pohyb hlavy.
    \end{definice}

    \begin{poznamka}
        Někdy se uvažuje, že hlava se nemusí posunout. Tedy $\delta$ bude do $Q \times \{-1, 0, 1\}$.

        Takhle je deterministický, nedeterministický nebudeme zavádět.
    \end{poznamka}

    \begin{definice}[Výpočet dvousměrného automatu]
        Slovo $w$ je přijato dvousměrným konečným automatem, pokud výpočet začal na prvním písmenu slova $w$ vlevo v počátečním stavu, čtecí hlava poprvé opustila slovo $w$ vpravo v některém přijímajícím stavu.
    \end{definice}

    \begin{poznamka}
        Můžeme si na kraj přidat speciální koncové znaky $\# \notin \Sigma$, abychom mohli lépe konstruovat automat. Pomocí $\delta\#$ a $\delta^R\#$ jsme schopni $\#$ odstranit (tedy přidání $\#$ nám nemění regularitu).
    \end{poznamka}

    \begin{veta}
        Jazyky přijímané dvousměrnými konečnými automaty jsou právě regulární jazyky.

        \begin{dukazin}
            $\Leftarrow$: Triviální. Hlavou pohybuji jen doprava.
            
            TODO
        \end{dukazin}
    \end{veta}

% 6. 4. 2021

    \begin{definice}[Palindrom]
        Palindrom je řetězec $w = w^R$.
    \end{definice}

    \begin{lemma}
        Jazyk $L_{pal}$ všech palindromů  není regulární.

        \begin{dukazin}
            Sporem. Předpokládejme, že je regulární a $n$ je konstanta z pumping lemmatu. Uvažujme slovo $w = 0^n 1 0^n$. $w=xyz$, $y$ obsahuje jednu nebo více z prvních $n$ nul a neobsahuje jedničku. Zapumpováním přidáme na začátek 0, tedy to už nebude palindrom.
        \end{dukazin}
    \end{lemma}

    \begin{definice}[Formální (generativní) gramatika]
        Formální (generativní) gramatika je $G = (V, T, P, S)$ složené z konečné množiny neterminálů (variables) $V$, neprázdné konečné množiny terminálních symbolů (terminálů) $T$, počátečního symbolu $S \in V$ a konečné množiny pravidel (produkcí) $P$ reprezentující rekurzivní definici jazyka. Každé pravidlo má tvar:
        $$ \beta A\gamma \rightarrow \omega, A \in V, \beta, \gamma, \omega \in (V \cup T)^*. $$

        Jazyky jsou typu $©L_0$
    \end{definice}

    \begin{definice}[Bezkontextová gramatika]
        Gramatika, kde pravidla mají tvar $A \rightarrow \omega, A \in V, \omega \in (V \cup T)^*$.

        Jazyky jsou typu $©L_1$
    \end{definice}

    \begin{definice}[Kontextová gramatika]
        Gramatika, kde pravidla mají tvar $\gamma A\beta \rightarrow \gamma\omega\beta, A \in V, \gamma, \beta \in (V \cup T)^*, \omega \in (V \cup T)^+$ (tzv. nezkracující). Jedinou výjimkou je pravidlo $S \rightarrow \lambda$, potom se ale $S$ nevyskytuje na pravé straně žádného pravidla (prostě přidáme nulové slovo, aniž bychom něco rozbili).

        Jazyky jsou typu $©L_1$
    \end{definice}

    \begin{definice}[Regulární / pravé lineární gramatiky]
        Gramatiky, kde pravidla jsou 2 typů: $A \rightarrow \omega B$ a $A \rightarrow \omega$, $A, B \in V, \omega \in T^*$.

        Jazyky jsou typu $©L_3$
    \end{definice}

    \begin{pozorovani}
        $©L_0 \supset ©L_1 \supset ©L_2 \supset ©L_3$.

        \begin{dukazin}
            Neostré inkluze z definice.

            Ostré později.
        \end{dukazin}
    \end{pozorovani}

    \begin{poznamka}[Notace]
        Terminály = malá písmena, číslice, znaky. Neterminály velká písmena. Řetězce terminálů = malá písmena z konce abecedy. Terminál nebo neterminál = velká písmena z konce abecedy. Řetězec neterminálů a terminálů = řecká písmena. Svislítko (OR) je kompaktní zápis více pravidel.
    \end{poznamka}

    \begin{definice}[Derivace $\implies^*$]
        Mějme gramatiku $G$. Říkáme, že $\alpha$ se přímo přepíše na $\omega$ (píšeme $\alpha \implies_G \omega$ nebo $\alpha \implies \omega$), jestliže $\omega$ vznikne z $\alpha$ 'aplikováním' jednoho pravidla.
        
        Říkáme, že $\alpha$ se přepíše na $\omega$ (píšeme $\alpha \implies_G^* \omega$ nebo $\alpha \implies^* \omega$), jestliže $\omega$ vznikne z $\alpha$ 'aplikováním' konečně mnoha pravidel. Posloupnost $\beta_i$, že $\alpha = \beta_1 \implies \beta_2 \implies … \implies \beta_n = \omega$ nazýváme derivací (odvozením). Pokud $\forall i ≠ j: \beta_i ≠ \beta_j$, pak hovoříme o minimálním odvození.
    \end{definice}

    \begin{definice}[Jazyk generovaný gramatikou]
        $(L(G))$, tj. jazyk generovaný gramatikou $G$ je množina terminálních řetězců, pro které existuje derivace ze startovního symbolu.

        Jazyk neterminálu $A \in V$ je $L(A) = \{w \in T^* | A \implies^* w\}$.
    \end{definice}

    \begin{pozorovani}[Gramatika typu 3]
        Každé slovo derivace obsahuje právě jeden neterminál, který je zcela vpravo. Druhým typem pravidla se derivace uzavírá, krok derivace pouze generuje symboly a změní neterminál.
    \end{pozorovani}

    \begin{veta}
        Pro každý jazyk rozpoznávaný konečným automatem existuje gramatika typu 3, která ho generuje.

        \begin{dukazin}
            $L = L(A)$ pro DFA $A(Q, \Sigma, \delta, q_0, F)$. Definujeme gramatiku $G = (Q, \Sigma, P, q_0)$, kde $P$ mají tvar $p \rightarrow aq$, když $\delta(p, a) = q$, $p \rightarrow \lambda$, když $p \in F$. Takováto gramatika zřejmě generuje $L$.
            $$ a_1…a_n \in L(A) \Leftrightarrow \exists q_0, …, q_n \in Q: \delta(q_i, a_{i+1}) = q_{i+1}, q_n \in F \Leftrightarrow $$ 
            $$ \Leftrightarrow (q_0 \implies a_1q_1 \implies … \implies a_1…a_nq_n \implies a_1…a_n) \text{ je derivace } \Leftrightarrow a_1…a_n \in L(G). $$ 
        \end{dukazin}
    \end{veta}

    \begin{lemma}
        Ke každé gramatice typu 3 existuje gramatika typu 3, která generuje stejný jazyk a obsahuje pouze pravidla tvaru $A \rightarrow aB, A \rightarrow \lambda, A, B \in V, a \in T$.

        \begin{dukazin}
            Zkonstruujeme tak, že zavedeme dostatečný počet nových neterminálů a pravidlo $A \rightarrow a_1…a_n[B]$ přepíšeme na $A \rightarrow a_1Y_1 \rightarrow a_1a_2Y_2 \rightarrow … \rightarrow a_1…a_n[B]$. Smažeme i pravidla typu $A \rightarrow B$.
        \end{dukazin}
    \end{lemma}

    \begin{veta}
        Pro každý jazyk generovaný gramatikou typu 3 existuje konečný automat, který ho rozpoznává.

        \begin{dukazin}
            Najdeme $\lambda$-NFA podobně jako jsme hledali gramatiku v důkazu předchozí věty z gramatiky z předchozího lemmatu.
        \end{dukazin}
    \end{veta}

    \begin{definice}[Levé lineární gramatiky]
        Gramatika $G$ je levá lineární, jestliže má pouze pravidla tvaru $A \rightarrow Bw, A \rightarrow w, A, B \in V, w \in T^*$.
    \end{definice}

    \begin{lemma}
        Jazyky generované levou lineární gramatikou jsou právě regulární jazyky.

        \begin{dukazin}
            'Otočíme pravidla' a získáme pravou lineární gramatiku, k té najdeme automat.
        \end{dukazin}
    \end{lemma}

    \begin{definice}[Lineární gramatika, jazyk]
        Gramatika je lineární, jestliže má pouze pravidla tvaru $A \rightarrow uBw, A \rightarrow w$. Lineární jazyky jsou právě jazyky generované lineárními gramatikami.
    \end{definice}

    \begin{upozorneni}
        Platí regulární jazyky $\subset$ lineární jazyky (viz $0^n1^n$, $S \rightarrow 0S1|01$).
    \end{upozorneni}

    \begin{definice}[Derivační strom]
        Mějme gramatiku $G$. Derivační strom pro $G$ je strom, kde: kořen je označen $S$, každý vnitřní uzel je označen $V$, každý uzel je ohodnocen prvkem $V \cup T \cup \{\lambda\}$. Je-li uzel ohodnocen $\lambda$, pak je jediným synem. Pokud jsou synové označeni $X_1, X_2, …, X_n$ a otec $A$, pak $(A \rightarrow X_1X_2…X_n) \in P$.
    \end{definice}

    \begin{definice}[Slovo dané stromem]
        Strom dává slovo $w$ (yield), jestliže $w$ je slovo složené z ohodnocení listů bráno zleva doprava.
    \end{definice}

    \begin{definice}[Levá a pravá derivace]
        Levá derivace (leftmost) ($\implies_{lm}, \implies_{lm}^*$) v každém kroku přepisuje nejlevější neterminál. Analogicky pravá derivace.
    \end{definice}

    \begin{veta}
        Pro danou gramatiku $G$ a $w \in T^*$ jsou následující tvrzení ekvivalentní: $A \rightarrow^* w$, $A \rightarrow_{lm}^* w$, $A \rightarrow_{rm}^* w$, existuje derivační strom s kořenem $A$ dávající slovo $w$.

        \begin{dukazin}
            Všimneme si, že bezkontextovou gramatiku a derivační strom s kořenem $A$ dávající slovo $w \in T^*$. Pak existuje levá derivace $A \implies_{lm}^* w$ v $G$. Viz prezentace.
        \end{dukazin}
    \end{veta}

% 13. 4. 2021


\section{Zásobníkový automat (PDA)}
    \begin{definice}
        Zásobníkový automat (PDA) je $P = (Q, \Sigma, \Gamma, \delta, q_0, Z_0, F)$, kde $Q$ je konečnámnožína stavů, $\Sigma$ je neprázdná konečná množina vstupních symbolů, $\Gamma$ neprázdná konečná zásobníková abeceda, $\delta$ je přechodová funkce $\delta: Q \times (\sigma \cup \{\lambda\})\times \Gamma \rightarrow P(FIN(Q \times \Gamma^*))$, $\delta(p, a, X) \ni (q, \gamma)$, kde $q$ je nový stav a $\gamma$ je řetězec zásobníkových symbolů, který nahradí $X$ na vrcholu zásobníku. $q_0 \in Q$ je počáteční stav, $Z_0 \in \Gamma$ je počáteční zásobníkový symbol (víc na začátku na zásobníku není), $F$ je množina přijímajících (koncových) stavů; může být nedefinovaná.
    \end{definice}

    \begin{definice}[Přechodový diagram pro zásobníkový automat]
        Uzly odpovídají stavům PDA, šipka odnikud ukazuje počátek, dvojité kruhy jsou přijímající stav, hrana odpovídá přechodu PDA.
    \end{definice}

    \begin{definice}[Situace zásobníkového automatu]
        Situaci zásobníkového automatu reprezentujeme trojicí $(q, w, \gamma)$, kde $q$ je stav, $w$ je zbývající vstup a $\gamma$ je obsah zásobníku (vrchol je vlevo). Situaci značíme ID z anglického instantaneous description.
    \end{definice}

    \begin{definice}[Posloupnost situací, jazyk]
        Intuitivně. Jen u jazyka můžeme mít přijímání koncovým stavem, nebo prázdným zásobníkem.
    \end{definice}

    TODO

    \begin{veta}
        Následující tvrzení jsou ekvivalentní:
        
        \begin{itemize}
            \item Jazyk $L$ je bezkontextový, tj. generovaný CFG.
            \item Jazyk $L$ je přijímaný nějakým zásobníkovým automatem koncovým stavem.
            \item Jazyk $L$ je přijímaný nějakým zásobníkovým automatem prázdným zásobníkem.
        \end{itemize}
    \end{veta}

    \begin{lemma}[Od přijímajícího stavu k prázdnému zásobníku]
        Mějme $L = L(P_F)$ pro nějaký PDA. Pak existuje PDA $P_N$ takový, že $L(P_N)$.

        \begin{dukazin}
                Odsimulujeme $P_F$ a ze všech přijímajících stavů dovolíme přejít do uklízecího stavu, kde automat vše vyhází. (Pozor, musíme přidat „neznámý“ prvek na zásobník, aby nedošlo k vyprázdnění v nepřijímajícím stavu.)
        \end{dukazin}
    \end{lemma}

    \begin{lemma}[Od prázdného zásobníku ke koncovému stavu]
        Pokud $L = N(P_n)$, pak $L = L(P_F)$.

        \begin{dukazin}
            Odsimulujeme a pak se, pokud máme prázdný zásobník, dostaneme do stavu, kde přijmeme.
        \end{dukazin}
    \end{lemma}

% 20. 4. 2021

    \begin{definice}[Algoritmus CYK]
        TODO
    \end{definice}

    \begin{definice}[Chomského normální forma]
        Bezkontextová gramatika, kde jsou pravidla pouze typu $A \rightarrow BC$ nebo $A \rightarrow A$.
    \end{definice}

    \begin{definice}[Zbytečný, užitečný, generující a dosažitelný sympbol]
        Symbol $X$ je užitečný v gramatice $G$, pokud existuje derivace tvaru  $S \implies^* \alpha X\beta \implies^* w$. Pokud $X$ není užitečný, říkáme, že je zbytečný.

        $X$ je generující, pokud $X \implies^* w$. $X$ je dosažitelný, pokud $S \implies^* \alpha X \beta$.
    \end{definice}

    \begin{definice}[Eliminace zbytečných symbolů]
            Nechť $G$ je $CFG$ a $L(G) ≠ \O$. Zkonstruujeme $G_1$ tak, že eliminujeme negenerující symboly a pravidla je obsahující a poté eliminujeme všechny nedosažitelné symboly. Pak $G_1$ nemá zbytečné symboly a $L(G_1) = L(G)$.
    \end{definice}

    \begin{definice}[Nulovatelný neterminál]
        Neterminál je nulovatelný, pokud $A \implies^* \lambda$.
    \end{definice}

    \begin{definice}[Jednotkové pravidlo]
        Jednotkové pravidlo je $A \rightarrow B \in P$, kde $A, B$ jsou oba neterminály.
    \end{definice}

    \begin{definice}[Jednotkový pár]
        Dvojici $A, B \in V$ takovou, že $A \implies^* B$ pouze jednotkovými pravidly nazýváme jednotkový pár (jednotková dvojice).
    \end{definice}

% 27. 4. 2021

    \begin{definice}[Chomského normální tvar]
        O bezkontextové gramatice $G(V, T, P, S)$ bez zbytečných symbolů, kde jsou všechna pravidla v jednom ze dvou tvarů $A \rightarrow BC$ nebo $A \rightarrow a$, $A, B, C \in V, a \in T$, říkáme, že je v Chomského normálním tvaru.
    \end{definice}

    \begin{lemma}[Gramatika v normálním tvaru, redukovaná]
        Mějme bezkontextovou gramatiku $G$, $L(G) \setminus \{\lambda\} ≠ \O$. Pak existuje CFG $G_1$ taková, že $L(G_1) = L(G) \setminus \{\lambda\}$ a $G_1$ neobsahuje $\lambda$-pravidla …

        \begin{dukazin}
            Prostě postupně odstraníme vše, co překáží.
        \end{dukazin}
    \end{lemma}

    \begin{veta}[ChNF]
        Mějme bezkontextovou gramatiku $G$, $L(G) \setminus \{\lambda\} ≠ \O$. Pak existuje CFG $G_1$ v Chomského normálním tvaru taková, že $L(G_1) = L(G) \setminus \{\lambda\}$.
    \end{veta}

    \begin{lemma}[Velikost derivačního stromu gramatiky v CNF]
        Mějme derivační strom podle gramatiky $G=(V, T, P, S)$ v Chomského normálním tvaru, který dává slovo $w$. Je-li délka nejdelší cesty $n$, pak $|w| ≤ 2^{n-1}$.

        \begin{dukazin}
            Indukcí. $|a| = 1 = 2^0$. Pokud pro $n-1$ tvrzení platí, pak se na začátku podívám, že $S$ generuje nejvýše 2 neterminály, čímž pokračujeme do 2 stromů s cestou $n-1$, tedy slovo je délky nejvýše $2·2^{(n-1)-1} = 2^{n-1}$.
        \end{dukazin}
    \end{lemma}

    \begin{veta}[Lemma o vkládání (pumping) pro bezkontextové jazyky]
        Mějme bezkontextový jazyk $L$. Pak existuje $n \in ®N$ takové, že každé $z \in L, |z| > n$ lze rozložit na $z = uvwxy$, kde: $|vwx| ≤ n$, $vx ≠ \lambda$, $\forall i ≥ 0: uv^iwx^iy \in L$.

        \begin{dukazin}
            Vezmeme derivační strom pro $z$. Najdeme nejdelší cestu a na ní dva stejné neterminály nejdále od kořene. Tyto neterminály určí dva podstromy, z nichž spodní můžeme nahradit horním. Jednoduše ověříme, že délky fungují (z minulého lemmatu).
        \end{dukazin}
    \end{veta}

% 4. 5. 2021

    \begin{veta}
        CFL jsou uzavřené na sjednocení, konkatenaci, iteraci, positivní iteraci, homomorfismus a zrcadlový obraz.

        \begin{dukazin}
            Sjednocení: pokud $V_1 \cap V_2 ≠ \O$, přejmenujeme neterminály. Přidáme nový startovní symbol $S_n$ a přidáme pravidlo $S_n \rightarrow S_1|S_2$. Zřetězení stejně, akorát pravidlo bude $S_n \rightarrow S_1|S_2$.

            Pozitivní a obecná iterace obdobně. (Pravidla $S_n \rightarrow SS_n|S$ a $S_n \rightarrow SS_n|\lambda$.)

            Zrcadlový obraz: obrátíme pravou stranu pravidel.
        \end{dukazin}
    \end{veta}

    \begin{upozorneni}
            CFL nejsou uzavřené na průnik! (Viz $\{0^n 1^n 2^i|n, i ≥ 1\}$ a $\{0^i 1^n 2^n | n, i ≥ 1\}$)
    \end{upozorneni}

    \begin{veta}[CFL i DCFL jsou uzavřené na průnik s regulárním jazykem]
        Mějme $L$ bezkontextový a $R$ regulární jazyk. Pak $L \cap R$ je bezkontextový jazyk.

        Mějme $L$ deterministický CFL a $R$ regulární jazyk. Pak $L \cap R$ je deterministický CFL.

        \begin{dukazin}
            Vezmeme kartézský součin stavů a zjevným způsobem doplníme přechody.
        \end{dukazin}
    \end{veta}

    \begin{veta}[CFL jsou uzavřené na substituci]
        Mějme CFL jazyk $L$ nad $\Sigma$ a substituci $\sigma$ na $\Sigma$ takovou, že $\sigma(a)$ je CFL pro každé $a \in \Sigma$. Pak je i $\sigma(L)$ CFL (bezkontextový).

        \begin{dukazin}
            Vezmeme všechny gramatiky substitucí $a \in \Sigma$ a gramatiku $L$. Neterminály a terminály budou sjednocením neterminálů a terminálů, k pravidlům navíc přidáme lambda přechod na start příslušných automatů.
        \end{dukazin}
    \end{veta}

    \begin{dusledek}[Homomorfismus]
        Bezkontextové jazyky jsou uzavřeny na homomorfismus.
    \end{dusledek}

    \begin{veta}[CFL jsou uzavřené na inverzní homomorfismus]
        Mějme CFL (resp. deterministický CFL) jazyk $L$ a homomorfismus $h$. Pak $h^{-1}(L)$ je bezkontextový (resp. deterministický CFL).
        \begin{dukazin}
            Přes buffer.
        \end{dukazin}
    \end{veta}

    \begin{lemma}
        Bezkontextové jazyky jsou uzavřené na levý (pravý) kvocient s regulárním jazykem. (Na přednášce přeskočeno.)
    \end{lemma}

    \begin{veta}[Rozdíl s regulárním jazykem]
        Mějme bezkontextový jazyk $L$ a regulární jazyk $R$. Pak $L - R$ je CFL.

        \begin{dukazin}
            $$ L - R = L \cap \overline{R}. $$
        \end{dukazin}
    \end{veta}

    \begin{upozorneni}
        CFL nejsou uzavřené na doplněk.
    \end{upozorneni}

    \begin{lemma}
        Doplněk deterministického CFL je opět deterministický CFL.

        \begin{dukazin}
            „Prohodíme koncové a nekoncové stavy.“ Nedefinované kroky ošetříme „podložkou“ na zásobníku, cyklus odhalíme pomocí čítače, až po přečtení slova procházíme koncové a nekoncové stavy.
        \end{dukazin}
    \end{lemma}

    \begin{upozorneni}
        DCFL nejsou uzavřené na sjednocení, viz $\{a^ib^jc^k | i≠j \lor j≠k \lor i≠k\}$.
    \end{upozorneni}

    \begin{upozorneni}
        DCFL nejsou uzavřené na homomorfismus.
    \end{upozorneni}

% 11. 5. 2021

    TODO Dyckovy jazyky.

    \begin{definice}[Jednoznačnost a víceznačnost CFG]
        Bezkontextová gramatika $G$ je víceznačná, pokud existuje alespoň jeden řetězec, pro který můžeme najít dva různé derivační stromy.

        V opačném případě je $G$ jednoznačná.
    \end{definice}

    \begin{veta}
        Nechť $L = N(P)$ nebo $L(P)$ pro nějaký DPDA $P$. Pak $L$ má jednoznačnou CFG.

        \begin{dukazin}
            Viz prezentace, nezkouší se.
        \end{dukazin}
    \end{veta}

\section{Turingovy stroje}
    \begin{definice}[Turingův stroj]
        Turingův stroj (TM) je sedmice $M = (Q, \Sigma, \Gamma, \delta, q_0, B, F)$ se složkami: $Q$ -- konečná množina stavů, $\Sigma$ -- konečná neprázdná množina vstupních symbolů, $\Gamma \supseteq \Sigma$ -- konečná množina všech symbolů pro pásku (Chceme $Q \cap \Gamma = \O$), $\delta$ -- (částečná) přechodová funkce $: (Q \setminus F) \times \Gamma \rightarrow Q \times \Gamma \times \{L, R\}$, $q_0$ -- počáteční stav, $B$ -- prázdný symbol, $F$ -- množina finálních stavů.
    \end{definice}

    \begin{definice}[Konfigurace TM (Instantaneous Description)]
        Konfigurace TM je řetězec $X_1X_2…X_{i-1}qX_iX_{i+1}…X_n$, kde $Q$ je stav TM, čtecí hlava je vlevo od $i$-tého symbolu, $X_1…X_n$ je část pásky mezi nejlevějším a nejpravějším symbolem různým od prázdného ($B$), s výjimkou, když hlava čte z $B$, pak je tam i toto $B$.
    \end{definice}

    \begin{definice}[Krok TM, odvození TM, přijímání jazyka TM]
        Intuitivně.
    \end{definice}

    \begin{definice}[Rekurzivně spočetný jazyk]
        Rekurzivně spočetný jazyk je jazyk, který je přijímán TM.
    \end{definice}

    \begin{definice}[TM se zastaví]
        TM se zastaví, pokud vstoupí do stavu $q$, s čteným symbolem $X$, a není instrukce pro tuto situaci, tj. $\delta(q, X)$ není definováno.
    \end{definice}

    \begin{definice}[Rozhodování jazyka, rekurzivní jazyky]
        Říkáme, že TM $M$ rozhoduje jazyk $L$, pokud $L = L(M)$ a pro každé $w \in \Sigma^*$ stroj $M$ nad $w$ zastaví.

        Jazyky rozhodnutelné TM nazýváme rekurzivní jazyky.
    \end{definice}

    \begin{definice}[Přechodový diagrem pro TM]
        Přechodový diagram pro TM sestává z uzlů odpovídajícím stavům TM. Hrany $q \rightarrow p$ jsou označeny seznamem všech dvojic, kde $\delta(q, X) = (p, Y, D), D \in \{\rightarrow, \leftarrow\}$.
    \end{definice}

\end{document}
